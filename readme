Required:
1) CEDET
2) st-link https://github.com/texane/stlink

Commentary:
WORK IN PROGRESS!!!111111
1) load file
2) Create STM32CubeMx project and generate it for SW4STM32
3) M-x stm32-new-project RET *select CubeMX project path*
4) open main.c
5) C-c . C to compile
6) connect stlink to your PC
7) stm32-run-st-util to start gdb server
8) start GDB debugger with stm32-start-gdb
9) in gdb) "load" to upload file to MC and "cont" to run.
5) good luck!

After CubeMx project regeneration or adding new libraries or new sources you need to do stm32-generate-makefile

Also add:

(require 'stm32)
(stm32-load-all-projects)

(global-semantic-idle-scheduler-mode 1)

to init file for automatic loading & updating